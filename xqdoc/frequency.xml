<xqdoc:xqdoc xmlns:xqdoc="http://www.xqdoc.org/1.0">
  <xqdoc:control>
    <xqdoc:date>2021-02-24T21:29:02.253+01:00</xqdoc:date>
    <xqdoc:version>1.1</xqdoc:version>
  </xqdoc:control>
  <xqdoc:module type="library">
    <xqdoc:uri>http://bdn-edition.de/xquery/freq</xqdoc:uri>
    <xqdoc:name>frequency.xqm</xqdoc:name>
    <xqdoc:comment>
      <xqdoc:description>Erstellt eine HTML-Tabelle auf Basis des konvertierten XML-Dokuments: 
Für jedes biblische Buch, das in der edierten Quellenschrift vorkommt, wird 
die Häufigkeit der Bibelreferenz ausgegeben.

Dies ist ein anderer Ansatz als der "Bibelstellenspannungsbogen"
(s. unten freq:table), wo die Häufigkeiten ausgehend von den einzelnen Kapiteln
der edierten Quellenschrift ermittelt werden.

Überlegung (Hannah): Kombination mit "Spannungsbogen" als weitere Funktion</xqdoc:description>
      <xqdoc:version>0.1 (2021-02-22)</xqdoc:version>
      <xqdoc:author>..., Marco Stallmann</xqdoc:author>
    </xqdoc:comment>
  </xqdoc:module>
  <xqdoc:imports/>
  <xqdoc:namespaces>
    <xqdoc:namespace prefix="freq" uri="http://bdn-edition.de/xquery/freq"/>
    <xqdoc:namespace prefix="tei" uri="http://www.tei-c.org/ns/1.0"/>
  </xqdoc:namespaces>
  <xqdoc:variables/>
  <xqdoc:functions>
    <xqdoc:function arity="2">
      <xqdoc:comment>
        <xqdoc:description>Erstellt eine HTML-Tabelle auf Basis des konvertierten XML-Dokuments: 
Für jedes biblische Buch, das in der edierten Quellenschrift vorkommt, wird 
die Häufigkeit der Bibelreferenz ausgegeben.

Dies ist ein anderer Ansatz als der "Bibelstellenspannungsbogen"
(s. unten freq:table), wo die Häufigkeiten ausgehend von den einzelnen Kapiteln
der edierten Quellenschrift ermittelt werden.

Überlegung (Hannah): Kombination mit "Spannungsbogen" als weitere Funktion</xqdoc:description>
        <xqdoc:version>0.1 (2021-02-22)</xqdoc:version>
        <xqdoc:author>..., Marco Stallmann</xqdoc:author>
      </xqdoc:comment>
      <xqdoc:name>freq:table2</xqdoc:name>
      <xqdoc:signature>declare function freq:table2($doc as item()* , $bible as item()*) as item()*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>doc</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>bible</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">item()</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="3">
      <xqdoc:comment>
        <xqdoc:description>Counts Bible-references in XML-Document with "book" and "chapter".</xqdoc:description>
        <xqdoc:version>0.1 (2021-02-22)</xqdoc:version>
        <xqdoc:author>Marco Stallmann</xqdoc:author>
      </xqdoc:comment>
      <xqdoc:name>freq:bible-book-stats</xqdoc:name>
      <xqdoc:signature>declare function freq:bible-book-stats($book as item()* , $chapter as item()* , $doc as item()*) as item()*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>book</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>chapter</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>doc</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">item()</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="2">
      <xqdoc:comment>
        <xqdoc:description>Tests if (converted!) XML-Document has Bible-references with "book"</xqdoc:description>
        <xqdoc:version>0.1 (2021-02-22)</xqdoc:version>
        <xqdoc:author>Marco Stallmann</xqdoc:author>
      </xqdoc:comment>
      <xqdoc:name>freq:test-book</xqdoc:name>
      <xqdoc:signature>declare function freq:test-book($book as item()* , $doc as item()*) as item()*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>book</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
        <xqdoc:parameter>
          <xqdoc:name>doc</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">item()</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="1">
      <xqdoc:comment>
        <xqdoc:description>Counts the number of bible references per chapter and returns a map. 
To do: JSON Output, XQuery-Application in JavaScript (e.g. XQIB)</xqdoc:description>
        <xqdoc:version>0.3 (2021-02-03)</xqdoc:version>
        <xqdoc:author>Marco Stallmann</xqdoc:author>
      </xqdoc:comment>
      <xqdoc:name>freq:count</xqdoc:name>
      <xqdoc:signature>declare function freq:count($converted as node()) as item()*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>converted</xqdoc:name>
          <xqdoc:type>node()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type occurrence="*">item()</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="1">
      <xqdoc:comment>
        <xqdoc:description>ALTE VERSION! Zählt die absoluten und relativen Häufigkeiten von Bibelreferenzen 
tei:citedRange in einem gegebenen Dokument (hier: Griesbach-Gesamtdatei).

Todo: 
- Weitere Gliederungsebenen berücksichtigen
- Für DHd-Bewerbung: (Manuelle) Erarbeitung von Beispielen/Zwischenergebnissen
(ggf. mithilfe des Printregisters oder der Oxygen-Suchfunktion)
- Überprüfung und Präzisierung der Wortzählung (Berücksichtigung 
von „rdg“ / „choice“ / … ?)
- Erarbeitung von Alternativlösungen für die Berechnung von relativen 
Häufigkeiten
- Verbesserung der HTML-Tabellendarstellung / Elementkonstruktion
- Hinzufügung einer graphischen Darstellung (ggf. Umwandlung in JSON / 
Ausgabe mithilfe der Open-Source-Datenvisualisierung Chart.js)</xqdoc:description>
        <xqdoc:version>0.2 (2021-12-21)</xqdoc:version>
        <xqdoc:author>Marco Stallmann</xqdoc:author>
      </xqdoc:comment>
      <xqdoc:name>freq:table</xqdoc:name>
      <xqdoc:signature>declare function freq:table($doc as item()*) as item()*</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>doc</xqdoc:name>
          <xqdoc:type occurrence="*">item()</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type>element()</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
    <xqdoc:function arity="1">
      <xqdoc:name>freq:word-count</xqdoc:name>
      <xqdoc:signature>declare function freq:word-count($arg as xs:string?) as xs:integer</xqdoc:signature>
      <xqdoc:parameters>
        <xqdoc:parameter>
          <xqdoc:name>arg</xqdoc:name>
          <xqdoc:type occurrence="?">xs:string</xqdoc:type>
        </xqdoc:parameter>
      </xqdoc:parameters>
      <xqdoc:return>
        <xqdoc:type>xs:integer</xqdoc:type>
      </xqdoc:return>
    </xqdoc:function>
  </xqdoc:functions>
</xqdoc:xqdoc>